
#
# rules for the variables and values

# can be used to extract entities (e.g., crops and fertilizers) not in the lexicon
# using nouns instead of noun phrases to avoid capturing modifiers; downside: missing parts of compound entities
- name: noun-rule
  priority: ${lowpriority}
  label: Noun
  type: token
  pattern: |
    [tag=/^NN/]

### These will act as variables in various assignment events ###
- name: generic-crop-rule
  priority: ${rulepriority}
  label: GenericCrop
  type: token
  pattern: |
    /(?i)(crop|cultivar|cultivation|seed|variety|varieties)/

- name: generic-fertilizer-rule
  priority: ${rulepriority}
  label: GenericFertilizer
  type: token
  pattern: |
    /(?i)fertilizer/

- name: nominal-sowing
  priority: ${rulepriority}
  label: Planting
  type: token
  pattern: |
    ([lemma=/early|late/])? /(?i)(^planting|sowing|seeding)/ /date|season|time|timing/?

- name: verbal-sowing
  priority: ${rulepriority}
  label: Planting
  type: token
  pattern: |
    [lemma = /plant|sow|seed/  & tag = /^VB/] 

- name: variable-area
  priority: ${rulepriority}
  label: Area
  type: token
  pattern: |
    ([lemma=/cultivate|plant|sown/])? [lemma=/area/] ([lemma=/sown/])?

- name: variable-fertilizer
  priority: ${rulepriority}
  label: FertilizerUse
  type: token
  pattern: |
    /(?i)(fertilizer|input)/ /use|usage|application/?

- name: yield-rule
  priority: ${rulepriority}
  label: Yield
  type: token
  pattern: |
    [lemma = "yield" & tag = /^NN/]

- name: variable-bird-attacks
  priority: ${rulepriority}
  label: BirdAttack
  type: token
  pattern: |
    /(?i)(^bird|avian)/ [lemma=/attack/]

### Values ###

- name: value-from-date
  priority: ${rulepriority}
  label: Date
  type: token
  pattern: |
    [entity='B-DATE'] [entity='I-DATE']*

- name: value-from-daterange
  priority: ${rulepriority}
  label: DateRange
  type: token
  pattern: |
    [entity='B-DATE-RANGE'] [entity='I-DATE-RANGE']*

# fixme: find example + should be handled in processors
- name: date-two-years
  priority: ${rulepriority}
  label: Date
  type: token
  pattern: |
    [word = /(\d\d){1,2}(\/|_)(\d\d){1,2}/]

- name: measurement-rule
  priority: ${rulepriority}
  label: Quantity
  type: token
  pattern: |
    [entity='B-MEASUREMENT'] [entity = 'I-MEASUREMENT']*

- name: area-size-entity-rule
  priority: ${rulepriority}
  label: AreaSize
  type: token
  pattern: |
    (?<![word = /^vs\.?|against|compared|^forecast/][word=/\w*/]{0,3}) [entity='B-MEASUREMENT' & !word = "-"] [entity='I-MEASUREMENT']* [entity='I-MEASUREMENT' & word = /^(ha|he)/]+

- name: percentage-rule
  priority: ${rulepriority}
  label: Percentage
  type: token
  pattern: |
    [entity='B-PERCENTAGE'] [entity='I-PERCENTAGE']* 

### These are not Value tbms, but they will be used as value args in assignment events
- name: fertilizer-values-from-lexicon
  priority: ${rulepriority}
  label: Fertilizer
  type: token
  pattern: |
    [entity='B-FERTILIZER'] [entity='I-FERTILIZER']*

- name: crop-values-from-lexicon-vars
  priority: ${rulepriority}
  label: Crop
  type: token
  pattern: |
    [entity='B-CROP'] [entity='I-CROP']*

- name: wet-season
  priority: ${rulepriority}
  label: WetSeason
  type: token
  pattern: |
    /(?i)(wet|rainy )/ []*? [lemma = /\bseason\b/]

- name: dry-season
  priority: ${rulepriority}
  label: DrySeason
  type: token
  pattern: |
    /(?i)(dry|hot)/ []*? [lemma = /\bseason\b/]

- name: complex-date
  priority: ${higherpriority}
  label: DateRange
  type: token
  pattern: |
    @Value "/" @Value ("/" @Value)?

### These are used for identifying context

- name: location-vars
  priority: ${rulepriority}
  label: Location
  type: token
  pattern: |
    [entity='B-LOC'] [entity='I-LOC']*
